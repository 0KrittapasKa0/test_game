# ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå Logic ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡∏ú‡∏•‡∏õ‡πä‡∏≠‡∏Å‡πÄ‡∏î‡πâ‡∏á

## 1. ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏´‡∏ç‡πà‡∏Ç‡∏≠‡∏á‡πÑ‡∏û‡πà (Hierarchy)

### Priority 1: ‡∏õ‡πä‡∏≠‡∏Å (2 ‡πÉ‡∏ö‡πÅ‡∏£‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
- **‡∏õ‡πä‡∏≠‡∏Å 9**: ‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏ß‡∏° 9 ‡∏à‡∏≤‡∏Å 2 ‡πÉ‡∏ö‡πÅ‡∏£‡∏Å‡πÅ‡∏£‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- **‡∏õ‡πä‡∏≠‡∏Å 8**: ‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏ß‡∏° 8 ‡∏à‡∏≤‡∏Å 2 ‡πÉ‡∏ö‡πÅ‡∏£‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- **‡∏Å‡∏é‡∏û‡∏¥‡πÄ‡∏®‡∏©**: ‡∏ñ‡πâ‡∏≤‡πÉ‡∏Ñ‡∏£‡∏õ‡πä‡∏≠‡∏Å ‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡∏ï‡∏£‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡πà‡∏ß‡πÑ‡∏û‡πà‡πÉ‡∏ö‡∏ó‡∏µ‡πà 3

### Priority 2: ‡πÑ‡∏û‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏© (3 ‡πÉ‡∏ö)
- **‡∏ï‡∏≠‡∏á (Three of a Kind)**: ‡πÄ‡∏•‡∏Ç‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á 3 ‡πÉ‡∏ö
- **‡∏™‡πÄ‡∏ï‡∏ó‡∏ü‡∏•‡∏±‡∏ä (Straight Flush)**: ‡πÑ‡∏û‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ô 3 ‡πÉ‡∏ö + ‡∏î‡∏≠‡∏Å‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
- **‡πÄ‡∏£‡∏µ‡∏¢‡∏á (Straight)**: ‡πÑ‡∏û‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ô 3 ‡πÉ‡∏ö (2-3-4, 10-J-Q, A-2-3)
- **‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô (Three Western Kings)**: J, Q, K ‡∏ó‡∏±‡πâ‡∏á 3 ‡πÉ‡∏ö

### Priority 3: ‡πÅ‡∏ï‡πâ‡∏°‡∏õ‡∏Å‡∏ï‡∏¥ (0-9 ‡πÅ‡∏ï‡πâ‡∏°)
- ‡∏ß‡∏±‡∏î‡πÅ‡∏ï‡πâ‡∏°‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡∏£‡∏ß‡∏°‡πÑ‡∏û‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÅ‡∏•‡πâ‡∏ß‡∏ô Mod 10
- 0 ‡πÅ‡∏ï‡πâ‡∏° = ‡∏ö‡∏≠‡∏î (‡πÅ‡∏¢‡πà‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢)

## 2. ‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏ú‡∏• (Comparison Rules)

### ‡∏Å‡∏£‡∏ì‡∏µ‡∏õ‡πä‡∏≠‡∏Å:
```typescript
if (dealerHand.type <= HandType.POK_8 && playerHand.type > HandType.POK_8) {
    return 'dealer'; // ‡πÄ‡∏à‡πâ‡∏≤‡∏°‡∏∑‡∏≠‡∏õ‡πä‡∏≠‡∏Å‡∏ä‡∏ô‡∏∞‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏õ‡πä‡∏≠‡∏Å
}
```

### ‡∏Å‡∏£‡∏ì‡∏µ‡πÅ‡∏ï‡πâ‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô:
1. ‡∏ß‡∏±‡∏î‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏û‡πà‡∏Å‡πà‡∏≠‡∏ô (`HandType`)
2. ‡∏ñ‡πâ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô ‡∏ß‡∏±‡∏î‡πÅ‡∏ï‡πâ‡∏° (`score`)
3. ‡∏ñ‡πâ‡∏≤‡πÅ‡∏ï‡πâ‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô ‡∏ß‡∏±‡∏î‡πÄ‡∏î‡πâ‡∏á (`dengMultiplier`)

### ‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡πÄ‡∏î‡πâ‡∏á:
- **2 ‡πÉ‡∏ö**: ‡∏î‡∏≠‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ ‡πÄ‡∏•‡∏Ç‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô = **2 ‡πÄ‡∏î‡πâ‡∏á**
- **3 ‡πÉ‡∏ö**: ‡∏î‡∏≠‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏±‡∏ô‡∏Å‡∏±‡∏ô = **3 ‡πÄ‡∏î‡πâ‡∏á** (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏ï‡∏≠‡∏á/‡πÄ‡∏£‡∏µ‡∏¢‡∏á/‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô)

## 3. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

### 3.1. `evaluateHand(cards: Card[]): HandResult`
```typescript
export interface HandResult {
    type: HandType;
    score: number;
    deng: number;
    name: string;
}

export function evaluateHand(cards: Card[]): HandResult {
    // 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡πä‡∏≠‡∏Å (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ 2 ‡πÉ‡∏ö‡πÅ‡∏£‡∏Å)
    if (cards.length === 2) {
        const pok = checkPok(cards);
        if (pok === 'pok9') {
            return { type: HandType.POK_9, score: 9, deng: getDengMultiplier(cards), name: '‡∏õ‡πä‡∏≠‡∏Å 9' };
        }
        if (pok === 'pok8') {
            return { type: HandType.POK_8, score: 8, deng: getDengMultiplier(cards), name: '‡∏õ‡πä‡∏≠‡∏Å 8' };
        }
    }

    // 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏û‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ 3 ‡πÉ‡∏ö)
    if (cards.length === 3) {
        if (isTong(cards)) {
            return { type: HandType.TONG, score: calculateScore(cards), deng: 5, name: '‡∏ï‡∏≠‡∏á' };
        }
        if (isStraightFlush(cards)) {
            return { type: HandType.STRAIGHT_FLUSH, score: calculateScore(cards), deng: 5, name: '‡∏™‡πÄ‡∏ï‡∏ó‡∏ü‡∏•‡∏±‡∏ä' };
        }
        if (isStraight(cards)) {
            return { type: HandType.STRAIGHT, score: calculateScore(cards), deng: 3, name: '‡πÄ‡∏£‡∏µ‡∏¢‡∏á' };
        }
        if (isSian(cards)) {
            return { type: HandType.SIAN, score: calculateScore(cards), deng: 3, name: '‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô' };
        }
    }

    // 3. ‡πÅ‡∏ï‡πâ‡∏°‡∏õ‡∏Å‡∏ï‡∏¥‡∏õ‡∏Å‡∏ï‡∏¥
    const score = calculateScore(cards);
    const deng = getDengMultiplier(cards);
    return { type: HandType.NORMAL, score, deng, name: score === 0 ? '‡∏ö‡∏≠‡∏î' : `${score} ‡πÅ‡∏ï‡πâ‡∏°` };
}
```

### 3.2. `compareHands(dealerHand: HandResult, playerHand: HandResult): 'player' | 'dealer' | 'draw'`
```typescript
export function compareHands(dealerHand: HandResult, playerHand: HandResult): 'player' | 'dealer' | 'draw' {
    // ‡∏õ‡πä‡∏≠‡∏Å‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
    if (dealerHand.type <= HandType.POK_8 && playerHand.type > HandType.POK_8) {
        return 'dealer';
    }

    // ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏û‡πà‡∏Å‡πà‡∏≠‡∏ô
    if (dealerHand.type !== playerHand.type) {
        return dealerHand.type < playerHand.type ? 'dealer' : 'player';
    }

    // ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÅ‡∏ï‡πâ‡∏°
    if (dealerHand.score !== playerHand.score) {
        return dealerHand.score > playerHand.score ? 'dealer' : 'player';
    }

    // ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏î‡πâ‡∏á
    if (dealerHand.deng !== playerHand.deng) {
        return dealerHand.deng > playerHand.deng ? 'dealer' : 'player';
    }

    return 'draw';
}
```

## 4. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏û‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏©

### 4.1. `checkPok(cards: Card[]): 'pok9' | 'pok8' | null`
```typescript
export function checkPok(cards: Card[]): 'pok9' | 'pok8' | null {
    if (cards.length !== 2) return null;
    const score = calculateScore(cards);
    if (score === 9) return 'pok9';
    if (score === 8) return '8';
    return null;
}
```

### 4.2. `isTong(cards: Card[]): boolean`
```typescript
export function isTong(cards: Card[]): boolean {
    if (cards.length !== 3) return false;
    return cards[0].rank === cards[1].rank && cards[1].rank === cards[2].rank;
}
```

### 4.3. `isStraight(cards: Card[]): boolean`
```typescript
export function isStraight(cards: Card[]): boolean {
    if (cards.length !== 3) return false;
    const rankOrder = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
    const indices = cards.map(c => rankOrder.indexOf(c.rank)).sort((a, b) => a - b);

    // Normal sequence (2-3-4, ..., 10-J-Q, J-Q-K)
    if (indices[2] - indices[1] === 1 && indices[1] - indices[0] === 1) return true;
    
    // Special case: Q-K-A (11, 12, 0)
    if (indices[0] === 0 && indices[1] === 11 && indices[2] === 12) return true;
    
    return false;
}
```

### 4.4. `isSian(cards: Card[]): boolean`
```typescript
export function isSian(cards: Card[]): boolean {
    if (cards.length !== 3) return false;
    const faceRanks: Rank[] = ['J', 'Q', 'K'];
    return cards.every(c => faceRanks.includes(c.rank));
}
```

### 4.5. `getDengMultiplier(cards: Card[]): number`
```typescript
export function getDengMultiplier(cards: Card[]): number {
    // ‡πÑ‡∏û‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ deng ‡∏Ñ‡∏á‡∏ó‡∏≠‡∏ô
    if (cards.length === 3) {
        if (isTong(cards)) return 5;
        if (isStraightFlush(cards)) return 5;
        if (isStraight(cards)) return 3;
        if (isSian(cards)) return 3;
    }

    // 2 ‡πÉ‡∏ö: ‡∏Ñ‡∏π‡πà ‡∏´‡∏£‡∏∑‡∏≠ ‡∏î‡∏≠‡∏Å‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô = 2 ‡πÄ‡∏î‡πâ‡∏á
    if (cards.length === 2) {
        if (isPair(cards)) return 2;
        if (isSameSuit(cards)) return 2;
    }

    return 1;
}
```

## 5. ‡∏ï‡∏±‡∏ß‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà (Implementation Examples)

### 5.1. ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡πä‡∏≠‡∏Å
```typescript
// ‡πÉ‡∏ô showdown() ‡∏´‡∏£‡∏∑‡∏≠ dealNextCard()
const playerCards = players[playerIndex].cards;
const pok = checkPok(playerCards);

if (pok) {
    // ‡∏õ‡πä‡∏≠‡∏Å! ‡∏à‡∏ö‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡πà‡∏ß‡∏ß‡πÑ‡∏û‡πà‡πÉ‡∏ö‡∏ó‡∏µ‡πà 3
    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ hasPok = true ‡πÅ‡∏•‡∏∞ dengMultiplier
}
```

### 5.2. ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏û‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏©
```typescript
// ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏à‡∏±‡πà‡∏ß‡πÑ‡∏û‡πà‡πÉ‡∏ö‡∏ó‡∏µ‡πà 3
if (player.cards.length === 3) {
    const hand = evaluateHand(player.cards);
    
    switch (hand.type) {
        case HandType.TONG:
            // ‡∏ï‡∏≠‡∏á! 5 ‡πÄ‡∏î‡πâ‡∏á
            break;
        case HandType.STRAIGHT_FLUSH:
            // ‡∏™‡πÄ‡∏ï‡∏ó‡∏ü‡∏•‡∏±‡∏ä! 5 ‡πÄ‡∏î‡πâ‡∏á
            break;
        case HandType.STRAIGHT:
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á! 3 ‡πÄ‡∏î‡πâ‡∏á
            break;
        case HandType.SIAN:
            // ‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô! 3 ‡πÄ‡∏î‡πâ‡∏á
            break;
    }
}
```

### 5.3 ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡∏ú‡∏•‡∏•
```typescript
const dealerHand = evaluateHand(dealer.cards);
const playerHand = evaluateHand(player.cards);
const result = compareHands(dealerHand, playerHand);

switch (result) {
    case 'player':
        // ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ä‡∏ô‡∏∞!
        // ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô + winnings
        break;
    case 'dealer':
        // ‡πÄ‡∏à‡πâ‡∏≤‡∏°‡∏∑‡∏≠‡∏ä‡∏ô‡∏∞!
        // ‡∏´‡∏±‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô
        break;
    case 'draw':
        // ‡πÄ‡∏™‡∏°‡∏≠!
        // ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô
        break;
}
```

## 6. Edge Cases ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£

### 6.1. ‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á J, Q, K
```typescript
// J, Q, K ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ 0 ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏ô Pok Deng
// ‡πÅ‡∏ï‡πâ‡∏°‡∏õ‡∏Å‡∏ï‡∏¥: 0 + 0 + 0 = 0 (‡∏ö‡∏≠‡∏î)
// ‡πÅ‡∏ï‡πâ‡∏°‡∏õ‡∏Å‡∏ï‡∏¥: 0 + 0 + 0 = 0 (‡∏ö‡∏≠‡∏î)

// ‡πÅ‡∏ï‡πâ‡∏°‡∏õ‡∏Å‡∏ï‡∏¥: J, Q, K = ‡∏ö‡∏≠‡∏î (0 ‡πÅ‡∏ï‡πâ‡∏°)
// ‡πÅ‡∏ï‡πâ‡∏°‡∏õ‡∏Å‡∏ï‡∏¥: 2, 3, 4 = 9 ‡πÅ‡∏ï‡πâ‡∏°
// ‡πÅ‡∏ï‡πâ‡∏°‡∏õ‡∏Å‡∏ï‡∏¥: 10, J, Q = 0 ‡πÅ‡∏ï‡πâ‡∏°
```

### 6.2. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á
```typescript
// ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏≤‡∏¢‡∏î‡πå
if (cards[0].rank === cards[1].rank && 
    cards[1].rank === cards[2].rank) {
    // ‡∏ï‡∏≠‡∏á!
}

// ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏á
if (isStraight(cards)) {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏£‡∏¥‡∏á
    // 2-3-4, 10-J-Q, J-Q-K, A-2-3
}
```

### 6.3. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô
```typescript
// ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô J, Q, K ‡∏ó‡∏±‡πâ‡∏á 3 ‡πÉ‡∏ö
if (cards.every(c => ['J', 'Q', 'K'].includes(c.rank))) {
    // ‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô!
}

// ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà J, Q, K ‡∏ó‡∏±‡πâ‡∏á 3 ‡πÉ‡∏ö = ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô
```

## 7. ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà (Refactoring Checklist)

### ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ `evaluateHand` ‡πÅ‡∏•‡∏∞ `compareHands`
- [ ] ‡∏°‡∏µ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `evaluateHand(cards)` ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ HandResult ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
- [ ] ‡∏°‡∏µ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `compareHands(dealerHand, playerHand)` ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á logic ‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö
- [ ] ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á logic ‡πÄ‡∏Å‡πà‡∏≤‡πÜ ‡πÉ‡∏ô UI components

### ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ Priority ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] ‡∏õ‡πä‡∏≠‡∏Å‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (`HandType.POK_9`, `HandType.POK_8`)
- [ ] ‡πÑ‡∏û‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏á (`HandType.TONG` ‡∏ñ‡∏∂‡∏á `HandType.SIAN`)
- [ ] ‡πÅ‡∏ï‡πâ‡∏°‡∏õ‡∏Å‡∏ï‡∏¥‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î (`HandType.NORMAL`)

### ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì deng ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] ‡∏ï‡∏≠‡∏á/‡∏™‡πÄ‡∏ï‡∏ó‡∏ü‡∏•‡∏±‡∏ä = 5 ‡πÄ‡∏î‡πâ‡∏á
- [ ] ‡πÄ‡∏£‡∏µ‡∏¢‡∏á/‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô = 3 ‡πÄ‡∏î‡πâ‡∏á
- [ ‡∏î‡∏≠‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô = 3 ‡πÄ‡∏î‡πâ‡∏á (3 ‡πÉ‡∏ö‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô)
- [ ‡∏Ñ‡∏π‡πà/‡∏î‡∏≠‡∏Å‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô = 2 ‡πÄ‡∏î‡πâ‡∏á (2 ‡πÉ‡∏ö)

### ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πâ‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô
- [ ] ‡∏ß‡∏±‡∏î‡πÅ‡∏ï‡πâ‡∏°‡∏Å‡πà‡∏≠‡∏ô (`dealerHand.score` vs `playerHand.score`)
- [ ] ‡∏ß‡∏±‡∏î‡πÄ‡∏î‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô (`dealerHand.deng` vs `playerHand.deng`)
- [ ] ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏ï‡πâ‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏î‡πâ‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô

### ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Edge Cases
- [ ] J, Q, K ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ 0 ‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏ß‡πà‡∏≤‡∏ö‡∏≠‡∏î
- [ ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô A-2-3 ‡πÅ‡∏•‡∏∞ Q-K-A
- [ ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô J, Q, K ‡∏ó‡∏±‡πâ‡∏á 3 ‡πÉ‡∏ö
- [ ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏î‡∏≠‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡πÉ‡∏ô 2 ‡πÅ‡∏•‡∏∞ 3 ‡πÉ‡∏ö

### ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏´‡∏¢‡∏∏‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Early Return)
- [ ] ‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏°‡∏∑‡∏≠‡∏õ‡πä‡∏≠‡∏Å ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡πà‡∏ß‡πÑ‡∏û‡πà‡πÉ‡∏ö‡∏ó‡∏µ‡πà 3
- [ ] ‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏°‡∏∑‡∏≠‡∏õ‡πä‡∏≠‡∏Å ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏õ‡πä‡∏≠‡∏Å‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- [ ] ‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏°‡∏∑‡∏≠‡∏õ‡πä‡∏≠‡∏Å AI ‡∏ó‡∏µ‡πà‡∏à‡∏±‡πà‡∏ß‡πÑ‡∏û‡πà‡πÉ‡∏ö‡∏ó‡∏µ‡πà 3 ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

## 8. ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏á‡∏≤‡∏ô‡πÉ‡∏ô React/TypeScript

### 8.1 ‡πÉ‡∏ô Component
```typescript
import { evaluateHand, compareHands, HandType } from '../utils/deck';

// ‡πÉ‡∏ô showdown()
const dealerHand = evaluateHand(dealer.cards);
const playerHands = players.map(p => evaluateHand(p.cards));

playerHands.forEach((playerHand, idx) => {
    const result = compareHands(dealerHand, playerHand);
    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏•‡∏á‡∏ö‡∏ö UI
});
```

### 8.2 ‡πÉ‡∏ô Store (Zustand)
```typescript
// ‡πÉ‡∏ô showdown()
const dealerHand = evaluateHand(dealer.cards);
const results = players.map((p, i) => {
    const playerHand = evaluateHand(p.cards);
    const result = compareHands(dealerHand, playerHand);
    
    return {
        ...p,
        result,
        score: playerHand.score,
        hasPok: playerHand.type <= HandType.POK_8,
        dengMultiplier: playerHand.deng,
    };
});
```

## 9. ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Logic

### 9.1. Test Cases
```typescript
// ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏õ‡πä‡∏≠‡∏Å 9
const pok9Cards = [{rank: 'K', value: 0}, {rank: '9', value: 9}];
expect(evaluateHand(pok9Cards).type).toBe(HandType.POK_9);
expect(evaluateHand(pok9Cards).score).toBe(9);

// ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ï‡∏≠‡∏á
const tongCards = [{rank: '7', value: 7}, {rank: '7', value: 7}, {rank: '7', value: 7}];
expect(evaluateHand(tongCards).type).toBe(HandType.TONG);
expect(evaluateHand(tongCards).deng).toBe(5);

// ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏á
const straightCards = [{rank: '2', value: 2}, {rank: '3', value: 3}, {rank: '4', value: 4}];
expect(evaluateHand(straightCards).type).toBe(HandType.STRAIGHT);
expect(evaluateHand(straightCards).deng).toBe(3);
```

### 9.2 ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö
```typescript
// ‡∏õ‡πä‡∏≠‡∏Å 9 vs ‡πÅ‡∏ï‡πâ‡∏° 7
const pok9Hand = { type: HandType.POK_9, score: 9, deng: 1 };
const normal7Hand = { type: HandType.NORMAL, score: 7, deng: 1 };
expect(compareHands(pok9Hand, normal7Hand)).toBe('dealer');

// ‡∏ï‡∏≠‡∏á vs ‡πÄ‡∏£‡∏µ‡∏¢‡∏á
const tongHand = { type: HandType.TONG, score: 1, deng: 5 };
const straightHand = { type: HandType.STRAIGHT, score: 7, deng: 3 };
expect(compareHands(tongHand, straightHand)).toBe('dealer');

// ‡πÅ‡∏ï‡πâ‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô ‡πÅ‡∏ï‡πâ‡∏°‡πÄ‡∏î‡πâ‡∏á‡∏ï‡πà‡∏≤‡∏á‡πà‡∏≤‡∏ô
const hand1 = { type: HandType.NORMAL, score: 7, deng: 2 };
const hand2 = { type: HandType.NORMAL, score: 7, deng: 1 };
expect(compareHands(hand1, hand2)).toBe('player');
```

---

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡πá‡∏ô**: ‡πÉ‡∏´‡πâ‡πâ Logic ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£ Refactor ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏é‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏™‡∏≤‡∏Å‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! üéØ
